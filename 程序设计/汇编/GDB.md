# GDB



## x 内存调试

您可以使用 `x`（“examine”的缩写）命令以独立于程序数据类型的多种格式检查内存。



**x/nfu addr**

- **n, f, 和 u** 是可选参数，指定要显示多少内存以及如何格式化；如果对 `nfu` 使用默认值，则不需要输入斜杠 `/` 。
- **address** 是一个表达式，给出您想要开始显示内存的地址。

- **n**：重复次数
    - 重复计数是一个十进制整数，默认是 1。它指定了要显示的内存量（按单位 `u` 计算）。如果指定了负数，则从 `addr` 开始向后检查内存。
- **f**：显示格式
    - 显示格式是 `print` 使用的格式之一（`x`, `d`, `u`, `o`, `t`, `a`, `c`, `f`, `s`, `i`, `m`）。
    - 初始默认值是 `x`（十六进制）。每次您使用 `x` 或 `print` 时，这个默认值会改变。
- **u**：单位大小
    - 单位大小可以是：
        - `b`：字节。
        - `h`：半字（两个字节）。
        - `w`：字（四个字节）。这是初始默认值。
        - `g`：巨字（八个字节）。
- **addr**：开始显示地址
    - `addr` 是您希望 GDB 开始显示内存的地址。
    - 它可以是一个表达式，只要该**表达式能够计算出一个整数值**。
    - 表达式可以是简单的整数（如 `0x1234`），也可以是更复杂的表达式（如**变量、寄存器、算术运算**等）



由于表示**单位大小的字母**与**指定输出格式的字母**完全不同，因此您不必记住单位大小或格式哪个先出现；**两种顺序效果相同**。输出规范 `4xw` 和 `4wx` 表示完全相同的意思。（但是，**计数 `n` 必须首先出现**；`wx4` 不工作。）





### f 显示格式

- `o`：八进制
- `x`：十六进制
- `d`：有符号十进制整数
- `u`：无符号十进制整数
- `t`：二进制
- `f`：浮点数
- `a`：地址（以十六进制显示，并跟随符号名，如函数名或变量名）
- `c`：将字节解释为ASCII字符并显示。对于不可打印的字符，GDB会用反斜杠序列或者C风格的转义字符表示。
- `s`：字符串（直到遇到空字符 `\0`）
- `i`：将**内存的原始字节**按照**目标架构的指令集架构**解码为**机器指令（汇编代码）**并显示。
- `m`：显示内存标签。



### n 重复次数

**n 是重复次数，而不是打印的字节数**

- **单位大小 `u` 为 `b`（1字节），重复次数 `n` 为 4**，则打印 4 个字节的数据项

```
(gdb) x/4xb 0x0000555555555000
0x555555555000 <xxx>:	0xbf	0x19	0x00	0x00
```

在这个例子中，`x/4xb` 命	令告诉 GDB 从地址 `0x0000555555555000` 开始，按照字节 (`b`) 单位，连续显示 4 个字节的数据项。



- **单位大小 `u` 为 `w`（4字节），重复次数 `n` 为 4**，则打印 4 个 4 字节的数据项，即总共 16 个字节：

```
(gdb) x/4xw 0x0000555555555000
0x555555555000 <xxx>:	0x000019bf	0xfe80e800	0x8948ffff	0x20bfe045
```

在这个例子中，`x/4xw` 命令告诉 GDB 从地址 `0x0000555555555000` 开始，按照字 (`w`) 单位，连续显示 4 个 4 字节的数据项。因此，总共打印了 16 个字节。



### x/m 检查内存标签

并不是所有的架构都支持内存标签（Memory Tagging）。暂略。
