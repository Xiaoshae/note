# 物理层

这一层的任务很简单，就是将二进制从源端口发送到目的端口。



**物理层 (Layer 1)**：定义了物理介质（如双绞线、光纤、无线电波）上的电气信号、电压、接口规范等。**它关心数据如何以比特流（0和1）的形式在物理线缆或空气中传输。**



它的主要任务是在传输媒体上传输原始的比特流。物理层并不关心这些比特流的含义，而是专注于如何将数据比特流从一个节点传输到另一个节点。



物理层负责将上层（数据链路层）传递下来的二进制比特序列进行编码（Encoding），将其转换为适合在特定物理媒介上传输的物理信号。这种转换可以表现为电信号的电压波动、光信号的光暗脉冲，或是其他形式的物理表征。随后，这些物理信号通过传输介质（如铜质双绞线或玻璃光纤）进行传输。在接收端，物理层执行相反的过程：它检测传入的物理信号，并通过解码（Decoding）将其还原为原始的比特流，再递交给数据链路层进行处理。



## 线缆

### 双绞线

双绞线是现代局域网中最常用的一种传输介质。它由四对（共8根）相互绝缘的铜导线组成，每一对的两根导线都按照特定的密度相互绞合在一起，最后被包裹在一个绝缘外皮之内。

“双绞”这个动作是这种线缆技术的核心，目的是为了**抵抗电磁干扰（Electromagnetic Interference, EMI）**。

 

双绞线按有无屏蔽层分类：

- **UTP (Unshielded Twisted Pair, 非屏蔽双绞线)**：这是最常见、最普及的类型，没有任何金属屏蔽层，完全依靠“双绞”的物理原理来抗干扰。适用于大多数办公和家庭环境。
- **STP (Shielded Twisted Pair, 屏蔽双绞线)**：在线缆外部或内部增加了金属屏蔽层（如铝箔或金属编织网），以提供更强的抗电磁干扰能力。适用于电磁干扰严重的环境，如工厂、医院或靠近高功率电力线的场所。



**按性能和带宽分类（线缆的“代数”）**：
这是我们常说的“网线”类型，由“Category” (类别) 划分，简称 **Cat**。

| 类别 (Category)        | 带宽 (频率) | 最大数据速率                            | 典型应用                   |
| ---------------------- | ----------- | --------------------------------------- | -------------------------- |
| **Cat5 (超五类)**      | 100 MHz     | 100 Mbps, 1000 Mbps                     | 百兆/千兆以太网 (已淘汰)   |
| **Cat5e (增强超五类)** | 100 MHz     | 1000 Mbps (1 Gbps)                      | 千兆以太网 (仍在使用)      |
| **Cat6 (六类)**        | 250 MHz     | 1 Gbps (最长100米) / 10 Gbps (最长55米) | 千兆/万兆以太网 (主流)     |
| **Cat6a (增强六类)**   | 500 MHz     | 10 Gbps (最长100米)                     | 万兆以太网                 |
| **Cat7 (七类)**        | 600 MHz     | 10 Gbps (普遍), 40 Gbps (短距离)        | 数据中心 (通常是S/FTP结构) |
| **Cat8 (八类)**        | 2000 MHz    | 25 Gbps / 40 Gbps (最长30米)            | 高速数据中心               |



### 光纤

光纤是利用光在玻璃或塑料纤维中的全反射原理来传输光信号的介质。它由纤芯、包层和保护套等组成。

- **单模光纤 (Single-Mode Fiber - SMF):** 纤芯较细，只允许一种模式的光在其中传播，衰减小，适合长距离、高质量的数据传输。[[7](https://www.google.com/url?sa=E&q=https%3A%2F%2Fvertexaisearch.cloud.google.com%2Fgrounding-api-redirect%2FAUZIYQEZCJsoK34ytR2K1l290pJQB-tZZa8E1p0wPwsEDBdoOWIm9BCapAcCOv0jFC4QKwfzqr2xr8_cZKYbwbFa2ruFPa9XLMFprTT4H-gx7BidNhRStk9hNcQKN6NYb5rA20-2)]
- **多模光纤 (Multi-Mode Fiber - MMF):** 纤芯较粗，允许多种模式的光在其中传播，成本相对较低，常用于距离较短的网络连接，如数据中心内部。



## 连接器

连接器，在中文中也常被称为**“接插件”、“插头和插座”、端子和端口**，是一种**机电元件 (Electromechanical Component)**。它的核心作用是**在两个电路、设备或系统之间建立一个可分离的、临时的电气连接**。

与永久性连接（如焊接）不同，连接器的关键特性是**可分离性 (Separability)**，这为电子产品的设计、生产、升级和维护带来了巨大的便利。



一个典型的连接器通常由三个主要部分组成：

-  **接触件 (Contacts / Terminals)**：这是连接器的核心，是实现电气连接的金属部分。它们必须精确地接触，以确保信号或电力的可靠传输。
- **绝缘体 (Insulator / Housing)**：这是一个塑料或陶瓷制成的基座，用于固定接触件，使它们保持正确的间距和排列，并防止它们之间发生短路。
- **外壳 (Shell)**：通常是连接器的外部保护层，由金属或塑料制成。

 

### 双绞线的连接器

**双绞线作**为一种极其通用的线缆，其连接器的选择完全取决于它的**应用场景**。以下是双绞线最常见的连接器类型，按应用领域划分。



#### 数据网络 (以太网)

这是双绞线最广为人知的应用领域，其连接器已经高度标准化。

 

**RJ45 (8P8C)**

- **RJ45** (Registered Jack 45) 是它的通用名称，源于电话系统标准。
- **8P8C** (8 Position, 8 Contact) 是其精确的技术描述，意为“8个位置，8个触点”。这是描述这类连接器最准确的术语。

它内部有8个金属触点，用于连接双绞线中的4对（8根）导线。

几乎所有的以太网标准，从百兆 (100BASE-TX) 到千兆 (1000BASE-T) 再到万兆 (10GBASE-T)，都使用RJ45连接器。



#### 工业、控制

在工业自动化、安防和嵌入式系统等领域，双绞线常用于传输控制信号，其连接器更注重可靠性和环境适应性。



**DB-9 (D-Sub 9-pin)**

这是一个D形的9针连接器，最著名的应用是电脑的 **RS-232 串口**。

在这些应用中，虽然连接器是DB-9，但其连接的线缆内部通常会采用双绞线，以增强长距离传输时的抗干扰能力。例如，**CAN Bus** 和 **RS-485** 总线就经常使用DB-9连接器配合双绞线。

**注意**：这里的双绞线是作为传输介质，而DB-9是其端接的接口形式。





## 端接标准

**端接标准 (Wiring Standard)** 是一套**系统性的规则和规范**，它精确地定义了**线缆中的导线**如何与**连接器（或端子）的特定触点（引脚）进行物理和电气上的连接。**

**端接标准**这是一种**引脚/线对分配规范 (Pin/Pair Assignment Specification)**。它精确定义了在**单个端接点 (single termination point)**，即一个连接器上，导线颜色与引脚位置之间的物理和电气对应关系。

**端接标准**定义了线缆中的导线与连接器引脚的**排列顺序规范**。



### 以太网

以太网双绞线接线标准的核心是**TIA/EIA-568**，最常接触的就是 **T568A** 和 **T568B** 这两种针对 RJ45 连接器的引脚排列（Pinout）规范。

一根标准的双绞线（如Cat5e、Cat6）内部有四对线，每对线由一根**主色线**和一根**白底带该主色的线（或称白X色）**组成。这四对线分别是：

- **橙/橙白**
- **绿/绿白**
- **蓝/蓝白**
- **棕/棕白**



**两个标准的核心区别**：仅仅是**橙色线对**和**绿色线对**的位置互换。

| **针脚号** | **T568A 标准** | **T568B 标准 (更常用)** |
| ---------- | -------------- | ----------------------- |
| 1          | 绿白           | 橙白                    |
| 2          | 绿             | 橙                      |
| 3          | 橙白           | 绿白                    |
| 4          | 蓝             | 蓝                      |
| 5          | 蓝白           | 蓝白                    |
| 6          | 橙             | 绿                      |
| 7          | 棕白           | 棕白                    |
| 8          | 棕             | 棕                      |



行业内有统一的标准来观察和计算RJ-45连接器的引脚。

**标准观察方法：**

1. 拿起RJ-45水晶头。
2. 将**没有卡口（弹片）**的那一面朝向自己，也就是能看到**金属触点（金手指）**的那一面。
3. 此时，**卡口（弹片）在下方**，被您的手指压着或者朝向地面。
4. 在这种姿态下，引脚的顺序是**从左到右，依次为 1, 2, 3, 4, 5, 6, 7, 8**。

**重要提示**：请**务必**按照这个“**卡口朝下，触点朝上**”的标准来记忆和操作。如果您将卡口朝上观察，引脚顺序会完全反过来（从左到右是 8 到 1），导致接线错误。



#### 直通线、交叉线

**直通线和交叉线并非端接标准，而是指线缆的两种布线方案，是通过在链路的两端采用相同或不同的端接标准（如 T568A 或 T568B）来最终实现的。**



**直通线 (Straight-Through Cable)**

线缆两端的接线标准**完全相同**。

**T568B 直通线**：两端都使用 T568B 标准。（**这是最常见的网线类型**）

**T568A 直通线**：两端都使用 T568A 标准。



发送端（TX）的信号通过线缆直接连接到接收端的接收（RX）引脚上。

用于连接**不同类型**的设备。这些设备内部已经设计好，一端是发送口，另一端是接收口。

- 计算机 <-> 交换机
- 路由器 <-> 交换机



**交叉线 (Crossover Cable)**

线缆一端使用 **T568A** 标准，另一端使用 **T568B** 标准。

用于连接**相同类型**的设备，因为同类设备的引脚定义是相同的（都是发送对发送，接收对接收），需要线缆来做交叉。

- **电脑** <-> **电脑**
- **交换机** <-> **交换机**
- **路由器** <-> **路由器**





**现代注意**：如今，交叉线已**基本被淘汰**。因为现代的网络设备普遍支持 **Auto MDI/MDI-X (自动线序翻转)** 功能，设备端口能自动识别线缆类型并调整自己的工作模式，所以无论使用直通线还是交叉线都能正常工作。



### RS-232

**反转线（Rollover Cable）是一种描述端到端引脚映射的线缆配置，而非一个端接标准。与以太网不同，基于 RJ45 的 RS-232 应用缺乏一个行业公认的、类似于 T568A/B 的标准化端接规范，因此其线缆的制作更多是遵循特定厂商的配置要求，而非普适的行业标准。**



标准的 RS-232 通信最少需要 3 根线：

- **TXD (Transmit Data)**: 发送数据
- **RXD (Receive Data)**: 接收数据
- **GND (Signal Ground)**: 信号地



Cisco 公司为其网络设备的**控制台端口 (Console Port)** 定义了一种基于 RJ45 的串口接线方式，这已成为业界广泛采纳的**事实标准**。

- **线缆**：使用一种特殊的**反转线 (Rollover Cable)**。这种线缆两端的 RJ45 接头引脚顺序是完全相反的（1-8, 2-7, 3-6, 4-5, 5-4, 6-3, 7-2, 8-1）。
- **适配器**：PC 端通常使用一个 **DB-9 to RJ45 的适配器**，将 PC 的 DB-9 串口引脚映射到 RJ45 上。



反转线的核心规则非常简单：一端 RJ45 的 **Pin n** 必须连接到另一端 RJ45 的 **Pin 9-n**。

- Pin 1 <----> Pin 8
- Pin 2 <----> Pin 7
- Pin 3 <----> Pin 6
- Pin 4 <----> Pin 5
- Pin 5 <----> Pin 4
- Pin 6 <----> Pin 3
- Pin 7 <----> Pin 2
- Pin 8 <----> Pin 1



为了制作这根线缆，最简单、最标准化的方法是：

1. **一端 (端 A)** 采用标准的 **T568B** 颜色顺序。
2. **另一端 (端 B)** 的颜色顺序则是 T568B 的**完全镜像或反转**。



| **端 A 引脚 (Pin)** | **端 A 颜色 (T568B 标准)** | **端 B 引脚 (Pin)** | **端 B 颜色 (完全反转)** |
| ------------------- | -------------------------- | ------------------- | ------------------------ |
| **1**               | 橙白                       | **8**               | 棕                       |
| **2**               | 橙                         | **7**               | 棕白                     |
| **3**               | 绿白                       | **6**               | 绿                       |
| **4**               | 蓝                         | **5**               | 蓝白                     |
| **5**               | 蓝白                       | **4**               | 蓝                       |
| **6**               | 绿                         | **3**               | 绿白                     |
| **7**               | 棕白                       | **2**               | 橙                       |
| **8**               | 棕                         | **1**               | 橙白                     |



以下是一个非常常见的 **DB-9 (PC端) to RJ45 适配器**的接线标准：

| RJ45 引脚 | 连接到 DB-9 的引脚 | DB-9 引脚功能 (PC DTE)    | 信号流向   |
| --------- | ------------------ | ------------------------- | ---------- |
| 1         | 8                  | CTS (Clear to Send)       | Input      |
| 2         | 6                  | DSR (Data Set Ready)      | Input      |
| **3**     | **2**              | **RXD (Receive Data)**    | **Input**  |
| **4**     | **5**              | **GND (Signal Ground)**   | -          |
| **5**     | **5**              | **GND (Signal Ground)**   | -          |
| **6**     | **3**              | **TXD (Transmit Data)**   | **Output** |
| 7         | 4                  | DTR (Data Terminal Ready) | Output     |
| 8         | 7                  | RTS (Request to Send)     | Output     |





## 通信协议

### 以太网

以太网 (Ethernet)

**物理层 (Layer 1)**：定义了如何在双绞线这种介质上用电信号表示0和1。例如 1000BASE-T 标准就定义了如何在Cat5e或更高等级的双绞线上实现1Gbps的传输。



**以太网供电 (PoE - Power over Ethernet)**

一个在以太网基础上扩展的协议，允许在同一根双绞线上**同时传输数据信号和直流电**，为无线AP、网络摄像头、IP电话等设备供电，极大简化了布线。



### 光纤

光纤的高带宽和长距离特性使其在多种场景下成为理想选择，但其上的协议应用模式却有很大不同。



**以太网协议**

在数据中心内部，连接服务器、存储设备和交换机的链路，以及连接不同楼宇的骨干网络，通常使用光纤。

这种场景下，**光纤链路**是**点对点 (Point-to-Point)** 的。一根或一对光纤直接连接两个设备（如交换机A的SFP+端口连接到交换机B的SFP+端口）。

**光纤上直接运行的就是纯粹的以太网协议**。光纤在这里仅仅是物理层的传输介质，扮演着一根“高速、长距离的网线”的角色。物理层将标准的以太网帧转换为光信号，在光纤中传输，对端再将光信号还原为以太网帧。整个过程对于数据链路层来说是完全透明的。



**光纤入户 (FTTH) 与 PON 协议**

在光纤入户的场景中，目标是从运营商的中心机房，用最经济的方式将光纤网络覆盖到成百上千个家庭用户。如果为每个用户都铺设一根独立的光纤（点对点），成本将是天文数字。

为了解决成本问题，FTTH采用了**无源光网络 (Passive Optical Network, PON)** 技术。这是一种**点对多点 (Point-to-Multipoint, P2MP)** 的架构。

- **OLT (Optical Line Terminal)**：位于运营商机房的核心设备。
- **ONU (Optical Network Unit) / ONT (Optical Network Terminal)**：位于用户家中的设备，即“光猫”。
- **无源光分路器 (Passive Optical Splitter)**：位于OLT和ONU之间，它无需供电，能将一根主干光纤的光信号，分发给多路分支光纤（如1:32或1:64）。



在这种P2MP结构中，如果直接运行以太网协议，会产生巨大的信号冲突（所有用户的上行信号会同时到达OLT）。因此，**PON网络在光纤上运行的是其特有的链路层协议，如 GPON 或 EPON**。

- **下行（OLT到ONU）**：采用广播方式。OLT将数据发送给所有ONU，但每个ONU的数据都经过加密，只有对应的ONU才能解密自己的数据。
- **上行（ONU到OLT）**：采用**时分多址（TDMA）**。OLT作为主控，为每个ONU分配一个精确的、独占的时间片。ONU只有在自己的时间片内才能向上发送数据，从而完美地避免了上行冲突。



用户在家中的设备（电脑、路由器）产生的数据是标准的**以太网帧**。当这些帧到达光猫（ONU）后，**ONU会将整个以太网帧封装进PON协议的帧格式中（如GPON的GEM帧）**，然后再通过TDMA机制发送给OLT。OLT收到PON帧后，再将里面的以太网帧解封装出来，交给上层的宽带认证服务器（BRAS）或交换机处理。



**普通光模块 (如SFP+, QSFP28)**：

一个单纯的**光电转换器**。它负责将交换机芯片输出的、遵循以太网标准的电信号，转换为光信号发送出去；反之亦然。

它只认识标准的、连续的以太网信号流。它本身**不具备任何复杂的链路层协议处理能力**。

用于点对点的数据中心网络。如果将它接入PON网络，它完全无法理解PON的TDMA时隙、上下行广播等机制，看到的只是一堆无意义的、混乱的光信号。



**PON光模块 (如GPON OLT SFP+)**：

它不仅仅是光电转换器，更是一个**高度集成的微型OLT系统**。模块内部集成了PON MAC芯片。

这个模块**完整地实现了PON协议**。它能处理下行数据的广播和加密，管理上行数据的TDMA时隙分配，与远端的多个ONU进行协议交互。

当这样一个模块插入数据中心交换机时，交换机本身仍然在处理标准的以太网帧。但是，这个特殊的PON模块负责将交换机递过来的以太网帧，**封装**成PON帧并根据PON协议规则发送出去；同时，它也负责接收来自多个ONU的PON帧，将其中封装的以太网帧**提取**出来，再交给交换机处理。交换机本身并不知道自己面对的是一个复杂的点对多点网络，它看到的只是这个PON模块提供给它的一个普通的以太网接口。



#### 无源光分路器

无源光分路器是一个非常精密的微光学器件，其内部结构类似于一个或多个半透明的镜子。想象一下，一束手电筒的光照在一块半透明的玻璃上，一部分光会穿透过去，另一部分光会被反射到另一个方向。光分路器就是利用类似的光学原理，通过精确控制光纤的熔融拉锥或使用平面光波导（PLC）技术，将一根输入光纤中的光能量，按照预设的比例（如1:32），分配到多根输出光纤中去。

**它不需要电，因为它本身不处理、不再生、也不放大信号。它只是一个纯粹的物理器件，像一个三棱镜或透镜一样，仅仅改变光的传播路径和能量分布。** 它对光信号中的“0”和“1”一无所知，只是忠实地将整个光波按比例分开。

**分光损耗**：这是最主要的损耗。分光比越大，损耗就越大。例如，一个理想的1:2分光器，每个输出端口的光功率都会衰减大约3分贝（dB），即能量减半。一个1:32的分光器，其理论损耗会达到约15dB（10 * log10(32)），意味着每个端口的光功率只有原始的**3%**左右！

PON网络的设计中有一个非常关键的指标叫做**光功率预算 (Optical Power Budget)**。运营商机房的OLT必须使用功率非常高的光模块，以确保光信号经过分光器的巨大衰减后，到达最远的用户光猫（ONU）时，其光功率仍然在光猫可以正常识别的灵敏度范围之内。



**上行数据只会发送到运营商机房的OLT**，这一点和下行（广播）是完全不同的。我们可以再次使用光分路器的原理来理解：

- **下行（OLT -> ONUs）**：光从“一”的端口进入，从“多”的端口出来，实现了广播。
- **上行（ONUs -> OLT）**：光从“多”的端口进入，在分路器内部**汇聚**到“一”的端口出去。



**TDMA**

PON网络的上行总带宽是很高的（如GPON为1.25 Gbps，XG-PON为2.5 Gbps）。TDMA将时间划分成极其微小的**时间片（Timeslot）**，通常是微秒（百万分之一秒）甚至纳秒（十亿分之一秒）级别。